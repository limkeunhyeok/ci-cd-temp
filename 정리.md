# Jenkins

> 나중에 자료 찾아서 더 정리할 것

## CI/CD 개념

- CI(Continuous Integration, 지속적인 통합):
  - 코드 베이스를 계속해서 통합하는 것
- CD(Continuous Delivery, 지속적인 서비스 제공):
  - 코드 베이스를 항상 배포 가능한 상태로 유지하는 것
- CD(Continuous Deployment, 지속적인 배포):
  - 코드 베이스를 사용자가 사용가능한 환경에 배포하는 것을 자동화하는 것

> 모든 과정을 지속 가능한 형태로 자동화하는 것

코드작성 -> 빌드 -> 테스트 -> 배포

### CI 필요 이유

- 모든 개발자가 한 프로젝트를 개발하면서 나중에 개발 코드를 합칠 때 문제가 생김
  - 이를 방지한다

> 가능한 빨리 코드를 코드베이스에 안착시키자!

### CD 필요 이유

- 백엔드 코드 작성 후에 프론트와 협업할 때, 배포 과정에서 에러 발생
  - production 사용자에게 지속적이고 안정적으로 서비스 제공한다

> 개발자가 개발에만 집중할 수 있도록 만든다!

## Jenkins

- CI/CD를 쉽게 해주는 도구
- Java Runtime 위에서 동작하는 자동화 서버
- 빌드/테스트/배포 등 모든 것을 자동화 해주는 서버

### 기본 개념

- Java Runtime Environment에서 동작
- 다양한 플러그인들을 활용해서 각종 자동화 작업을 처리할 수 있다
- 일련의 자동화 작업 순서들의 집합인 Pipeline을 통해 CI/CD 파이프 라인을 구축함

### Plugin

- 많은 플러그인들이 존재
  - Credentials Plugin, Git Plugin, Pipeline, ...

> 초기 Recommend 해주는 거 깔면 어지간한 거 다 깔려 있다!

### Credentials Plugin

- Jenkins는 서버이기 때문에 배포에 필요한 리소스에 접근하려면 여러 중요 정보들을 저장하고 있어야 한다
  - aws token, git access token, ...

### Pipeline Plugin

- Jenkins의 핵심 기능인 Pipeline을 관리해주는 플러그인

### Pipeline

- 파이프라인은 CI/CD 파이프라인을 젠킨스에 구현하기 위한 일련의 플러그인들의 집합이자 구성
- 여러 플러그인들을 이 파이프라인에서 용도에 맞게 사용하고 정의함으로써 파이프라인을 통해 서비스가 배포됨
- Pipeline DSL(Domain Specific Language)로 작성
- Declarative, Scripted Syntax가 있다
  - Declarative가 더 최신이고 가독성이 좋다

### Pipeline syntax

> 4가지 섹션이 있다

- Agent Section:
  - 젠킨스가 작업할 때, 혼자하기 버거우니 여러 slave node를 두고 일을 시킬 수 있는데, 어떤 젠킨스가 일을 하게 할 것인지 지정한다
- Post Section:
  - 작업(stage)이 끝난 이후에 결과에 따라 후속 조치를 지정한다(success, failure, always, cleanup, ...)
- Stage Section:
  - 어떤 일들을 처리할 것인지 stage를 정의한다
- Steps Section:
  - 한 스테이지 안에서의 단계로 일련의 스텝을 보여준다

### Declaratives

- environment: 환경 변수 설정
- parameter: 파이프라인 실행 시 파라미터
- triggers: 어떤 형태로 트리거 되는지
- when: 언제 실행되는가

### steps

- 여러 작업들을 실행 가능
- 플러그인을 깔면 사용할 수 있는 스텝들이 생겨남

참고:
https://jbhs7014.tistory.com/156
https://velog.io/@sykim/jenkins-%EA%B0%9C%EB%85%90
https://seosh817.tistory.com/104
https://www.redhat.com/ko/topics/devops/what-is-ci-cd
